Gmail Uygulama Şifresi Oluşturmak İçin Link: https://myaccount.google.com/apppasswords
2FA Google hesabında açık değilse uygulama şifresi oluşturamazsın
Google Hesap → Güvenlik (Security) → 2 Adımlı Doğrulama buradan aç
Aynı bölümde Uygulama şifreleri (App passwords)’ne gir.
Önemli NOT! Çalışma alanı (Google Workspace) hesabı kullanıyorsan, yöneticinin App Passwords’a izin vermesi gerekebilir.
Uygulama ve Cihaz seç → Oluştur/Generate de → çıkan 16 haneli şifreyi .env’de SMTP_PASS olarak kullan.

paket kurulumu: npm i express pg cors cookie-parser jsonwebtoken bcrypt dotenv nodemailer speakeasy
# package.json yoksa oluşturmak için
npm init -y
npm i multer

# 2FA için gerekli paketler
npm i speakeasy qrcode-terminal dotenv
node generate-2fa-secret.js
npm install
npm start
# veya geliştirme için:
npm run dev
node index.js

Olay Türü İlk Sorgu:

SELECT * FROM public.olaylar ORDER BY o_id;
Olay Ekledikten Sonra Sorgu:
-- Doğru DB’de misin?
SELECT current_database(), inet_server_port();

-- Kaç olay var?
SELECT COUNT(*) FROM public.olay;

-- Son eklenen 10 olayı tür adıyla birlikte gör
SELECT 
  o.olay_id,
  COALESCE(l.o_adi,'(tanımsız)') AS olay_turu,
  o.aciklama,
  o.enlem,
  o.boylam,
  k.kayit_tarihi
FROM public.olay o
LEFT JOIN public.olaylar l ON o.olay_turu = l.o_id
LEFT JOIN public.kayit   k ON k.olay_id   = o.olay_id
ORDER BY o.olay_id DESC
LIMIT 10;

-- Geometriyi metin/geojson olarak görmek istersen:

SELECT o.olay_id, ST_AsText(o.geom) AS wkt, ST_AsGeoJSON(o.geom) AS geojson
FROM public.olay o
ORDER BY o.olay_id DESC
LIMIT 5;


-- Olaylarda hangi tür ID’leri var?

SELECT olay_turu, COUNT(*) 
FROM public.olay
GROUP BY olay_turu
ORDER BY olay_turu;

-- Son olayları tür ADI ile birlikte gör

SELECT o.olay_id, o.olay_turu AS tur_id, l.o_adi AS tur_adi, o.aciklama
FROM public.olay o
LEFT JOIN public.olaylar l ON l.o_id = o.olay_turu
ORDER BY o.olay_id DESC
LIMIT 20;


generate-2fa-secret.js


kullanımı:
node generate-2fa-secret.js


Mobil Uyumluluk:
1) Terminalde kök klasörde bu kodları yaz ve çalıştır:
npm i
npm run pw:install

npm run dev:iphone

npm run dev:pixel

# Sadece emülatörü açar (sunucu zaten çalışıyorsa)
npm run mobile:iphone
2) package.json a eklenen scripts.
{
  "scripts": {
    "dev": "node index.js",            // veya kendi dev komutun (CRA ise: react-scripts start)
    "mobile:iphone": "playwright open --device='iPhone 14 Pro' http://localhost:3000",
    "mobile:pixel": "playwright open --device='Pixel 7' http://localhost:3000",
    "mobile:ipad": "playwright open --device='iPad Pro 11' http://localhost:3000",
    "mobile:landscape": "playwright open --device='iPhone 14 Pro' --viewport-size=844,390 http://localhost:3000"
  }
}
3) npm run dev
   npm run mobile:iphone   # iPhone 14 Pro
  npm run mobile:pixel     # Android Pixel 7
Eğer kendi telefonun ile bakmak istersen:

Bilgisayar ve telefonun aynı wifi de olmazi gerekli.

Şu anda bu projede port 3000’de çalışıyor. Telefon tarayıcısına, bilgisayarının yerel IP’sini yaz:
http://<PC-IP-adresi>:3000 (örn. http://192.168.1.34:3000)
powershell de ipconfig bu kodu çalıştırıp bilgisyarın yerel ip sini öğrenebilirsin.







Hatalar ve Yaşanan zorluklar:
1) Backend kaynaklı yaşadığım sorunda supervisor olarak giriş yaptığında kendini silme aşamasında soeun yaşadım.
Silme tuşuna bastığımda 
Silme isteği başarıyla commit oluyor (pgAdmin’de silinmiş gözükmesi bu yüzden) fakat cevap döner dönmez bu commit siliniyor 
frontend hemen ardından kullanıcı listesini /api/admin/users ile yenilerken 401 alıyor ve “silinemedi” gibi davranıyor.
Hemen sonrasında, supervisor olarak giriş yaptığında kabul etmiyor.
2) Olay ekleme işleminde databasedeki mevcut olaylara bakıyor eğer olay varsa max id + 1 mantığıyla yeni olay ekleme işlemi yapıyor.
Eğer hiç olay yoksa id yi 1 olarak ekleyerek olay eklemesini gerçekleştiriyor.
Olay türünde de Olay ekleme/silme mantığına benzer bir mantık izledim fakat olay ekleme/silme işleminden farklı olarak olay türü sildiğimiz zaman ona bağlı olaylarda siliniyor.
Kullanıcı ekleme ve kullanıcı silmme işlemi de bu diğer iki işlem ile benzer mantıkta çalışıyor.
Burada yaşadığım zorluk ise bu database e ekleme silme işleminde max id +1 mantığı ve aslında en son silinen olayın gerçekten database den silinerek gerçekten databese de olan olaylar a göre işleme sokabilmek.
Bu sorun olay türünde de geçerli.
3)Site ismi Site logosu e-mail gönderimi vb. değişkenleri .env e atarak daha pratik bir işlem yapmak istedim fakat çevresel değişken atamaları yaparken bazen değişkenlerimi görmedi.
4)Özel bir şifreleme politikası izledim ve bu da bana çok fazla hata yarattı.
Bu şifreleme politikası kullanıcı kayıt olma ekranı ön yüzde gerçekleştiği için çok bir sorun yaşamadım fakat supervisor olarak kayıt olma aşaması arka yüzde pgadmin'e query tool ile olduğundan dolayı ilk olarak pgadminden hiçbir şekilde manuel olarak kullanıcı ekleyemedim.
Bu sorunu çözdükten sonra, 2FA için zorunlu olan BASE32 code'u database e olduğu gibi kaydetti.
Ben şifrelenmiş olarak kayıt edilmesini istedim dolayısıyla bu da benim için bir sorundu.




Kullanıcı Sadece Kendi eklediği olayı silebilecek
olay id serial
Enlem Boylam elle değiştirilebilir olsun
Olay Türü id ön yüzde gözükmesin
olay ı kimin eklediği gözüksün hem veri tabanında da gözüksün hem de ön yüzde
Supervisor silme tuşuna bastığı zaman gösterimde olmasın (false olsun).
Veritabanında kayıt olsun ayrıca kimin false yaptığı da olsun.
Kullanıcı güncelleme işlemini yapabilsin.
Kendi eklediği olaylar ile Başka kullanıcıların  eklediği olaylar farklı renk olsun.
2. AŞAMA:
Sunucu log analizi(Ayrı bir log tablosu olacak doğrudan database e gelecek)
Kim ne zaman giriş yaptı ve ne zaman çıkış yaptı.
Dil desteği databese de de olacak şekilde










İlk Hafta İlerleme:
Kullanıcı Supervisor olarak giriş yapabiliyor ve olay ekleme ve silme işlemini yapabiliyor olay sildiği zaman olay tablosundaki active sütunu false oluyor ve ön yüzde gözükmüyor.
Kullanıcı Supervisor olarak giriş yaptığında onun eklediği olaylar farklı renkte diğerlerinin eklediği olaylar farklı renkte gözüküyor
Supervisor ile giriş yaptığında olay türü silindiğinde ona bağlı olaylarda siliniyor yani active ksmı false oluyor ve ön yüzde gözükmüyor.
kullanıcı silme kısmında sildiği kullanıcının ve kendisinin eklediği olayların ve kendisinin user tablosundaki active kısmı false oluyor ve ön yüzde gözükmüyor.
Eğer active bir kullanıcı varsa o kullanıcının e maili ya da aynı kullanıcı adı ile kullanıcı kaydı olunmaz.
Eğer active bir supervisor varsa o supervisorun kullanıcı adı ya da e maili ile supervisor eklemesi olmaz.
Diğer gün bakacağın şey. Aktif bir kullanıcı maili ya da kullanıcı adı ile supervisor kaydına bakmak ya da bunun tam tersi.
Diğer gün bakacağın diğer şey: o kullanıcıların id leri serial formatında olacak oldu ki active liği false olan bir kullanıcının özel bir durumda activeliğini true yaparsak
 o kullanıcın eğer onunla aynı ve ondan sonra eklenen aynı mailde ya da anı kullanıcı adı ile ekli bir kullanıcı varsa bile true olması lazım ve ona özgü id si ile onun eklediği olayların da 
 ön yüzde gözükmesi lazım ve onun eklediği olayların da true olması lazım kullanıcı için bu.
Süpervisor için eğer bi süpervisor silindiyse active liği false olduğu durumda onunla aynı kullanıcı adında ya da onunla aynı mail de bir supervisor eklendiği zaman daha sonra o eski silinen supervisor özel bir durumda active liği true olursa sildiği olaylar false olara kalıcak fakat silinmeden önce eklediği olaylarlar activeliği true olarak geri gelecek.
Kendimi ya da bir kullanıcıyı sildiğim zaman şu anda silme işlemini ön yüzde sayfa yenilemesi yaparak yapıyor fakat ben istiyorum ki silme işlemini ön yüzde direk silsin yenileme yapmadan.
Ayrıca sana fotoğraf olarak attım o fotoyu da iyice incele orada olay tablosunda created_by, created_by_display, is_active, deactivated_by, deactivated_by_display, created_by_role sütunlarını artık kullanmıyorum o sütunlar da database de gözükmesin index.js de de gözükmesin.
Ve kesinlikle olay_id ve users_id serial formatında olsun şu anda database de integer formatında onları database de serial formatında olarak görmek istiyorum.
Şimdi sana index.js in şu anki halini atıcam bana sadece bu dediklerimi yapacak şekilde güncelle ve güncel olarak genel mantığını bozmadan tam halini kod olarak at 









2.Hafta ilerleme:
OLay tablosunda created_by ile created_by_name aynı şeyi temsil ediyor. Gereksiz bir fazlalık var. Birinden birisinin silinmesi gerekli.
Ön yüzde hala o olayı ekleyen kullanıcı adı gözükmüyor ve kullanıcı id de gözükmüyor bunların ön yüzde o olaya tıklandığı zaman gözükmesi gerekli.
Fakat kullanıcı olarak ya da supervisor olarak giriş yapıldığında kendi eklediğin olaylar ve başkasının eklediği olaylar farklı renklerde gözüküyor bu konuda başarılı.
Users tablosunda deleted_by_id sütunu gelmesi gerekli silen kişinin id side önemli.
id kısımları kesinlikle serial formatında olması gerekli.





2.Hafta İLerleme devamı:
Supervisor eklemesi yaparken BASE32Code database de active liği false olan bir supervisorün BASE32 code u olduğunda bile database e o supervisor eklenmesin ve error versin BASE32 CODE aynı gibi bir uyarı versin BASE32CODE unu değiştir desin
Aynı BASE32Code u yazdığım zaman 2FA olmuyor ama database e supervisor eklemesi yapıyor şu anda.




3.Hafta İlerleme: 
Supervisor kendini sildiği zaman olay tablosu ve olaylar tablosunda deactivated_by ... sütunlarında sıkıntı var  silen kişi gözükmüyor.
Aktifliği olan bir kullanıcıyı query tool ile sorgu yaptığım da aktif edememem gerekiyor. Fakat şu anda aktif edebiliyorum.
Database de id si olmayan bir kullanıcının id sini girip active liği true yapmak için sorgu yaptığım zaman bu sorgu çalışıyor. Çalışmaması gerekiyor.














Özellikler:
1) Kullanıcı supervisor olarak giriş yapabiliyor 2FA kodu zorunlu. Eğer BASE32 Code yok ise manuel olarak database e eklenmiyor.
2) Supervisor'ın BASE32CODE u şifrelenmiş bir şekilde database de tutuluyor. Ayrı bir sütunda ise gene şifrelenmiş bir şekilde database de aynı BASE32CODE olan bir supervisor eklenmesin diye şifreli özel bir şekilde kaydediliyor.
3) Active liği false olan ya da Active liği true olan bir supervisor ile aynı BASE32CODE, kullanıcı adı, e-mail adresi ile supervisor eklemesi yapılamaz.
4) Kullanıcı Supervisor olarak giriş yapabiliyor ve olay ekleme ve silme işlemini yapabiliyor olay sildiği zaman olay tablosundaki active sütunu false oluyor ve ön yüzde gözükmüyor.
5) Kullanıcı Supervisor ya da normal olarak giriş yaptığında onun eklediği olaylar farklı renkte diğerlerinin eklediği olaylar farklı renkte gözüküyor.
6) Supervisor ile giriş yaptığında olay türü silindiğinde ona bağlı olaylarda siliniyor yani active ksmı false oluyor ve ön yüzde gözükmüyor.
7) Supervisor olarak giriş yapıldığında kullanıcı silme kısmında sildiği kullanıcının ve o kullanıcının eklediği olayların ve sildiği kullanıcının user tablosundaki active kısmı false oluyor ve ön yüzde gözükmüyor. Eğer kendisini sildiyse de aynı özellikler geçerlidir.
8) Ön yüzde eğer active'liği true ya da false olan bir kullanıcı varsa o kullanıcının e maili ya da aynı kullanıcı adı ile kullanıcı kaydı olunmaz.
9) Kullanıcı girişi yapıldığında kullanıcı olay ekleyebilir ve sadece kendi eklediği olaylarda düzenleme yapabilir(Açıklamasını değiştirebilir, koordinatlarını elle girebilir, olay türünü değiştirebilir).
10) Kullanıcı girişinde e mail doğrulanması gereklidir doğrulanmamış bir mail adresi ile sisteme giriş yapılmaz ve database email_verified sütununda false yazar. E mail doğrulanması için ise maile gelen linke tıklanması gereklidir.
11) Kullanıcı kayıt olurken ya da sisteme supervisor eklenmesi yaparken şifreleme politikası izlenir(en az 8 harf, en az 1 büyük ve 1 küçük harf, en az 1 noktalama işareti ve en az 1 rakam kullanmak).
12) Kullanıcı database e eklenirken user_id sütunu PK(Primary Key) formatında eklenir.
13) Manuel olarak, active liği false olan bir kullanıcının active liğini true yaparsanız eğer önceki eklediği olaylar va olay türlerinin de active liği true olur ve ön yüzde gösterilir.
14) Manuel olarak, active liği true yapmak istersek eğer girilen id deki kullanıcının active liği true ise sorgu hata verir ve çalışmaz. Eğer girilen id database de yoksa sorgu yine hata verir.









Use My location
Şifremi unuttum
Kullanıcı şifreni kaydetme (cookie).




Geolocation API konumunu bulmak için kullanılan
app.js deki geoFindMe() fonksiyonu kullanıldı
startLiveLocation() canlı takip için oluşturlan fonksiyon



Neden index.js e yazmadım da app.js dosyası açıp o dosyaya yazdım?
Geolocation, tamamen tarayıcı tarafında (Front-End) çalışan bir Web API’dir.
Yani ön yüzde çalışan API ile konum bilgisi enlem boylam cinsinden alınıyor backend de yazdığım index.js dosyasındaki /api/submit_olay ve /api/olay/:id gibi uçlar kullanılarak db ye kaydediliyor.
Backendde yeni bir fonksiyon eklenmediği için index.js dosyasına yazmaya gerek kalmadı.
Masaüstü bilgisayarların çoğunda manyetometre yok → webde koni görünmemesi normal. Mobilde ise sensör varsa ve izin verilirse görürsün.





Name: QGIS içinde sadece görünen etiket. İstediğini yaz.
Örn: AfetYonetimi-Local

Service: Boş bırak. (Yalnızca pg_service.conf kullanıyorsan doldurulur.)

Host: 127.0.0.1 (PostgreSQL aynı bilgisayarda ise)
Uzak sunucuysa: o sunucunun IP’si veya DNS’i (örn. 10.0.0.12 ya da db.example.com)

Port: 5432 (değiştirmediysen varsayılan)

Database: afet_yönetimi (senin SS’de yazan)

SSL mode: Yerel için disable / prefer. Uzak ve SSL sertifikası varsa require/verify-ca seçebilirsin.

Authentication > Basic:

User name: postgres (veya yetkili kullanıcı)

Password: parolan (istersen “Store” ile proje dosyasına düz metin olarak kaydeder; güvenlik açısından genelde işaretleme)

Sonra Test Connection → OK.

QGIS’te sol “Browser” panelinden PostGIS → [bağlantı adı] açılır; şema/tabloları görür, katmanlara çift tıklayıp haritaya eklersin.











1) Enlem ve Boylamın otomatik dolması için serverini ilk olarak paketle daha sonra o paketeki .gpkg dosyasını aç. Düzenleme yaptığın olay tablosunda sağ tık yapıp properties kısmına tıkla ve oradan fields kısmından enlem ve boylam da eğişiklik yap. olay_id boş kalacak.
Daha sonra bu yeni dosyayı klasör halinde kopyala ve android de qfield'a yapıştır. Uygulamada yüklenen projeni aç offline olarak verini topla ve daha sonra telefonunu bilgisayara tak ve qfield klasöründeki proje klasörünü kopyala ve daha sonra download klasörüne yapıştır verileri kontrol etmek için qgis de açabilirsiniz. Daha sonra verilen sql kodu ile eklenen veriyi manuel olarak database e ekle(olay_id qgis de açıldığında boş gözükür fakat veri tabanına eklerken serial fomatında olduğu için olay_id dolu bir şekilde eklenir).
Enlem Boylam haritadan seçilen bölgeye göre otomatik dolarken olay_id yi neden otomatik doldurmadık?
-Çünkü, qgis de serial formatı yok bu yüzden integer formatında yapsaydık çakışma riski olduğundan boş bıraktık database e doğrudan serail formatında insert ile ekleniyor.




2)kullanıcının doldurması gereken zorunlu alanlar:
-enlem, boylam, olay_turu, geom, created_at, created_by_name
şartlar:
created_by_name database de olacak ve active liği true olacak bir kullanıcı olacak.
olay_turu database de olacak ve active liği true olacak.



3)olay_id serail formatında olduğu için null olsa bile database e eklendiğinde değer olarak eklenir.
created_by_name deki değer users tablosundaki username e karşılık gelen kullanıcının id si created_by_id ye otomatik eklenir.
eklenen olayın active liği null olsa da database e active liği default olarak true olarak eklenir.






QField a kullanıcı bazlı ekleme
kullanıcı widget ile olay türünü name olarak seçebilsin  
Fotoğraf ve video ekleme 







with_variable(
  'raw', coalesce("photo_urls",'[]'),
  with_variable(
    'csv', replace(replace(replace(@raw,'[',''),']',''),'"',''),
    with_variable(
      'first', trim( array_first( string_to_array(@csv, ',') ) ),
      CASE
        WHEN @first IS NULL OR @first = '' THEN ''
        WHEN left(@first,1) = '/' THEN 'http://localhost:3000' || @first
        ELSE @first
      END
    )
  )
)






with_variable(
  'raw', coalesce("video_urls",'[]'),
  with_variable(
    'csv', replace(replace(replace(@raw,'[',''),']',''),'"',''),
    with_variable(
      'first', trim( array_first( string_to_array(@csv, ',') ) ),
      CASE
        WHEN @first IS NULL OR @first = '' THEN ''
        WHEN left(@first,1) = '/' THEN 'http://localhost:3000' || @first
        ELSE @first
      END
    )
  )
)





lejant (foto var mı yok mu ve video var mı yok mu ikisi de var)
eklediğim dosyaların path ini değiştrip kopaylayan script
harita büyütme zoom level
opnstreet map 


aws 
ec2
rds   relational database server
son 50 olay değil bütün olaylar ön yüzde gözüksün









Supervisor sadeece kendi eklediği olay türünü silebilsin.
Supervisor süpervisor ü silemesin (supervisor ün silinmesi manuel olsun. Ama filtreli bir şekilde silinsin).
süervisor sadece kendisini silsin.
E mail domain birden çok olabilir.(Domain liste gibi olsun yani env kısmında ; ile ayır ve oradaki bilgi yazısı da değişsin).
Yöneteci ekranında eklenenen olay ekleme tarihi, foto var mı, video var mı true false şeklinde. Enlem boylam çıkartılıcak.
Ön yüzde filtreleme gelsin yanında da sayıları yazsın. Fotoğraf sütünunda  var mı yok mu yazsın, Video vAR MI YOK MU. Excelldeki gibi bir filtreleme olsun. OLay tablosu ve kullanıcıda. Kullanıcı tablosunda aratma gibi olacak.
Şifremi unuttum yazısını parolamı unuttum yaz.








SMTP_USER VE SMTP_FROM_EMAİL farkı öğren.
Veri tabanı tabloları sıfırdan yükleyen bir kişi için temiz kodu.
Filtreleme çıkan sayı dinamik
Sunucuyu başlattığında ya da ekranı yenilediğinde default ekran değişti.
Filtreleme görüntü bozukluğu düzelt. Sayılar dinamik güncellensin.
Olay türünde supervisor kendi eklediği olay türünü güncelleyebilsin.
Olay türü eklemede var olan bir olay türü eklendiği zaman çıkan hata mesajı düzeltilsin.
Filtrelemede kullanıcı tablosunda e mail doğrulanması sütununda filtreleme yok. O sütunda da filtreleme olsun ve dinamik olsun.
Olay Tablosunda Olay tarihi sütununda veri gözükmüyor. Veri gözüksün.
OLay tarihi sütununda özel filtreleme yazıları eklendi ve özel filtreleme kutucukları geldi.
Kullanıcı tablosunda e posta hesanı için özel filtreleme kutucukları geldi bunlar .env deki değişkene bağlı









"Mecut olaylar harita gösterilir ifadesi hiç gözükmesin". Admin panelinde de gözükmesin o yazı. 
giriş ekranında mobilde fazladan yer var yani kaydırma oluyor o kaydırma özelliği olmasın direkt ekranın boyutuna göre değişsin ve tam ekran olsun.kaydırma özelliği olmasın. Sadece aşırı küçükse açılan ekran o zaman kaydırma özelliği bozulsun.Responsive olsun.
Giriş ekranında eklenen olaylar .env e bağlı bir çevresel değişkene göre o değişken true olursa o olaylar giriş ekranında gözüksün false olursa gözükmesin. Cluster olarak olaylar gözüksün.
.env de giriş ekranında haritayı yüklerken açıldığı alanın başlangıç koordinatlarının ve ne kadar küçültebildiği zoom seviyesinin belirtilmesi .envde olsun
Konumumu kullan tuşu ve gönder tuşu en tepede olsun ve gönder tuşuna tıkladığım zaman olay bildirim formu çıkacak tam ekranda ayrı bir ekran gibi ama geri gitme tuşu da olacak. user yazısını sil. Konumumu kullan a tıkladığın zaman aynı zamanda haritadan yeni bir nokta eklemeye tıkladığım zaman orada siyah marker eklediğim yer olsun kumumu kullandaki marker kaybolsun yani özetle haritada sadece bir tane marker olsun.
Mobil tarafında ekran döndürme işlemini yapma ekranı dönmesin hep dikey ekranda kalsın.
Açıklama kısmına ses ile ekleme özelliği gelsin.
Kamera(foto) ya da kamera(video) kısmındaki yazılar yerine icon kullan. photo icon ve video icon kullan.
Olay tablosunda e posta filtrelemesi domain e göre eklenmesi. 
Olay tablosunda filtreleme yaparken çıkan sonuçta tümünü seç dersem oradaki fitreleme sonucunda çıkan olaylardaki tümünü seçsin.
Olay tablosunda filtreleme sonucu çıkan olaylar dinamik bir şekilde gözüksün ve olay tablosunda default değer 5 taneyi göstersin orada .env e bağlı çalışmasın. Haritada da gözüksin ve Harita altta gözüksün.

olaylar tablosunu süoervisor .gpkg olarak o datayı kaydedebilsin



Production kısmına siteyi geçir.
supervisorlere bölge bazlı yetkilendirme.







PORT=3000
CORS_ORIGIN=http://localhost:3000

# Postgres
PGHOST=127.0.0.1
PGPORT=5432
PGUSER=postgres
PGPASSWORD=itpc501aB.
PGDATABASE=afet_yönetimi

QFIELD_SYNC_ROOT="C:\Users\USER\OneDrive\Resimler\Masaüstü\Data_Algorithims\afet-yonetimi_New\afet-yonetimi\qfield4\download_qfield2\qfield4"
QFIELD_INGEST_INTERVAL_MS=30000
SITE_TITLE=Afet Yönetimi
SITE_LOGO_URL=/afet_logo.png
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587


SMTP_SECURE=false
SMTP_USER=ibrahimtpc93@gmail.com
SMTP_PASS=kxtrnaycadmfgvhr
SMTP_FROM_NAME=Afet Yönetimi
SMTP_FROM_EMAIL=ibrahimtpc93@gmail.com
ALLOWED_EMAIL_DOMAIN=hacettepe.edu.tr;metu.edu.tr;ankara.edu.tr;csu.edu.tr

TABLE_PAGE_SIZE_EVENTS=5
TABLE_PAGE_SIZE_TYPES=20
TABLE_PAGE_SIZE_USERS=30
MAP_INITIAL_LAT=39.92
MAP_INITIAL_LNG=32.00
MAP_INITIAL_ZOOM=13
MAP_MIN_ZOOM=2
SHOW_EVENTS_ON_LOGIN=true                                                                                                                                               bu da .env çevresel değişkenlerim. Şimdi senden istediklerim: 1) Harita yüklenirken yüklendiği başlangıç koordinatları,sınır zoom seviyesi gibi değerler MAP_INITIAL_LAT=39.92
MAP_INITIAL_LNG=32.00
MAP_INITIAL_ZOOM=13
MAP_MIN_ZOOM=2  .env dosyamdaki  bu çevresel değişkenlere bağlı kalsın yani orada bu değişkenler olsun. 2) Giriş ekranında eklenen olayları .env dosyasındaki çevresel değişken SHOW_EVENTS_ON_LOGIN=true olursa görebileyim false olursa göremiyeyim. Ayrıca şu anda giriş ekranında gelen haritada haritaya tıklayınca siyah marker gözüküyor giriş ekranında haritaya tıklasam bile siyah marker gözükmesin giriş yaptıktan sonra siyah marker gözüksün. Giriş ekranında gözüken olaylarda hepsi diğer olayların rengi olsun yani mavi renk olsun daha sonra giriş yaptıktan sonra kendi eklediğim olaylar yeşil oluyor zaten. Daha sonra haritada olaylar cluster ile gözüksün yani kümeli bir şekilde bunu leaflet yapıyor o yüzden leaflet kullan. Giriş ekranında görüntülenen olayların renkleri maviydi ama küme renklerini mavi yapma sadece tek olay markerlarının renkleri mavi gözüksün. Giriş ekranında gösterilen olayların pop up kısmında kimin eklediği gözükmesin ancak kimin eklediğini giriş yaptıktan sonra görebileyim. 3) olay bildirim formunda kamera(foto) ve kamera(video) yazıları kamera ve video iconları şeklinde olsun yalnız icon şeklinde olsun ve o iconlar bütün tarayıcılarda görünür olsun. 4) Açıklama kısmının üstüne mikrofon iconu  koy ve o icon a bastığım zaman ses izini istesin izin verilirse sesle yazma özelliği gelsin konuştuğum yazıya çevrilsin. Daha sonra olay bildirim formunda olay türleri  scroll lu gözüksün. Belirli bir boyuttan sonra scroll olsun öyle gözüksün. 5) Haritanın altında ^Mevcut olaylar haritada gösterilir. Yeni olay eklemek için haritadan bir konum seçin veya enlem/boylamı elle girin^. bu yazı var bu yazıyı sil hiçbir yerde gözükmesin ve harita, açılan ekrana göre boyutu ayarlansın responsive olsun açılan ekranın boyutuna göre açılsın yani o ekrana göre büyüyecek ekrana sığmak için. 6) Supervisor girişinde yönetim panelinde olay sayfasında en üstte olay tablosu olsun ve  onun altında da ekranın boyutuna göre değişecek olan harita olsun. ve o da responsive olacak ve o harita, ekran boyutuna göre ve olay tablosunun boyutuna göre altta tam ekran olacak şekilde harita gösterilsin yani scroll ile kaydırmadan bile tam ekranda hem olay tablosunu hem de haritayı görebileyim. Bu harita yalnızca olay sayfasında olsun. kullanıcılar sayfası ve olay türü sayfasında olmasın.7) Bu olay tablosunda gösterilen haritada yalnızca  olay tablosunda yaptığım filtreleme işlemi sonucuna göre değişen olaylar gösterilsin ve bu filtreleme sonucunda olan olayları gpkg formatında bilgisayarıma kaydedebileyim bunun için yalnızca olay tablosunun altında çıkan haritaya özel sağ üstünde gpkg yazılı bir icon olsun o icon a bastığım zaman filtreleme sonucundaki çıkan verimi gpkg formatında bilgisayarıma kaydedebileyim. 8) Yönetim panelinde üstte Mevcut olaylar haritada gösterilir. Yeni olay eklemek için haritadan bir konum seçin veya enlem/boylamı elle girin. yazısı gözüküyor o yazı orda da gözükmesin. 9)  Şu anda Supervisor girişinde, form tuşuna bastığım zaman olay bildirim formu karşıma çıkıyor, aynı kullanıcı girişindeki gibi. Fakat şu anda istiyorum ki, form tuşuna bastığım zaman bu olay bildirim formu karşıma çıkmayacak tam ekran harita karşıma çıkacak ve marker ların rengi de hepsi mavi renk gözükecek. Aynı zamanda haritaya tıkladığım zamanda ise siyah marker olmayacak. Yani supervisor a olay ekleme yetkisini kaldıracağım. Örneğin, supervisor girişinde form tuşuna bastı, tam ekran ekran buyutuna sığacak şekilde harita geldi, (bu haritada kullanıcıların eklediği olaylar gözükecek, harita markerlarının hepsi mavi renkte cluster daki küme renkleri mavi değil sadece marker renkleri mavi) orada bir marker a bastığı zaman açılan pop up da şu anki olduğu gibi kullanıcının eklediği olayın verilerini görebiliyor aynı zamanda açılan pop up da o olayı silmek içinde bir tuş olacak ve o tuşa basınca o olayı silebilecek.  Kullanıcı girişinde açılan ekranda ise şu anki açılan ekranla aynı ekran olacak. 10)Şu anda  Kullanıcı girişinde çıkan olay bildirim formunda  konumumu kullan tuşuna bastığım zaman konumuma siyah marker koyuluyor ve ben ekstra haritadan bir yere tıkladığım zaman iki tane siyah marker gözüküyor. Ben istiyorum ki, konumumu kullan tuşuna tıkladığım zaman siyah marker gözüküyor ve tekrar haritadan bir noktaya tıkladığım zaman o konumumu kullandaki marker kaybolsun ve haritada tıkladığım marker gelsin ya da haritada bir yere tıkladığım zaman daha sonra konumumu kullan tuşuna tıkladığım zaman o önceki haritada tıkladığım marker kaybolsun ve konumumu kullandaki marker kalsın. Yani haritada tek bir tane siyah marker olsun. Ek olarak enlem boylam olay bildirim formunda gözükmesin. Ek olarak, olay bildirim formundaki açıklama kısmını şu anda fare ile boyutunu büyültüp küçültebiliyorum, bu da olmasın sabit olsun, o boyutu fare ile değiştiremiyeyim.  Şimdi sana app.js dosyamı da bu yazıyla birlikte gönderdim senin yapacağın şey, Benim bu dediklerimi iyice düşünmek ve benim dosyalarımı ve proje yapımı iyice okuyup analiz edip, bu istekerimi yerine getirmek için mevcut mantığını asla bozmadan güncellediğin dosyaların, güncellenen kısımlarının  eski kısımını ve yeni kısımını benim mevcut boşluk uyumumu bozmayacak şekilde o kısımların tam halini gönder. Ekstra olarak eğer, bir dosyaya bir şey eklemem gerekiyorsa nereye ekleyeceğimi detaylı bir şekilde yaz, hangi fonksiyondan önce ya da sonra eklemem gerektiğini yaz.      ilk olarak sana app.js dosyamı göndericem bana bir şey eklediğim zaman nereye ekleyeceğimi hangi fonksiyondan sonra ekleyeceğimi ve eklelen kısımın tam halini gönder ve değişen kısımlar olursa da eski kısımın ve yeni kısımın tam halini gönder. İlk olarak bu dediklerimi yapmak için index.html dosyamı ve index.css
                                                                                                                                                                                                                                                                                                                                 
  index.css dosyam.  şimdi bu dosyamı iyice incele ve bu dediklerimi yapacak şekilde uygun mu değil mi onu da 
  incele eğer uygun değilse değişen kısımları eski kısmını ve yeni kısmını mevcut boşluk uyumuma
   uyacak şekilde eski ve yeni tam halini gönder ya da eğer 
  eklenecek şeyler varsa nereye ekleyecem hangi
   satırdan önce ve öncesinde ne yazılar var ve nerede çağıracağım onu da söyle çağıracağım 
   yerin öncesinde ve sonrasında neler var onları da yaz ondan sonra at. index.html in bu dediklerimi yapacak şekilde
    mevcut mantığını bozmadanve mevcut app.js dosyama da uyacak şekilde   güncellenmiş tam halini gönder buradan.
    index.css in ise değişecek kısımlarını gönder ya da eklenecek yerler varsa onları gönder.                                                                                                                                               






excell-alacak saat dosyası
https://www.svgrepo.com/vectors/video/3


Tamam şimdi sana  index.css dosyamı göndericem sakın ama
 sakın bu index.css in mevcut mantığını bozma sadece bu dediklerimi yapacak şekilde güncel ve tam halinin kodunu bana buradan at




olay türü girerken olumlu bir olay türü ise true
olumsuz bir olay türü ise false olsun




 1) Lejant ön yüzde sadece supervisor girişindeki olay sayfasında gözüküyor ben istiyorum ki supervisor girişindeki olay sayfasında da, kullanıcı girişindeki haritada da, supervisor girişindeki form sayfasında da gözükecek ek olarak eğer SHOW_EVENTS_ON_LOGIN=true olduğunda giriş ekrannda eğer SHOW_EVENTS_ON_LOGIN=false olduğunda giriş ekranında gözükmesin. Lejant açılan ekranın büyüklüğüne göre responsive olsun harita büyüklüğüne göre değişsin yani responsive olsun.
 2) supervisor girişindeki olay sayafasında giriş yaptığımda yönetim panelinde olay sayfasında indirme butonu gözükmüyor ve o buton sadece olay sayfasında gözükecek ve form sayfasına girdiğim zaman tekrar olay sayfasına girdiğimde görünürlüğü gitmeyecek. Ek olarak, o butona tıkladığım zamam filtreleme sonucundaki mevcut olayları geojson olarak indirebileceğim.
 3) supervisor girişinde yönetim panelinde olay sayfasındaki harita sadece süpervisor girişi yaptığım zaman ilk olay sayfasına tıkladığımda yüklendiğinde .env deki çevresel değişkenlere bağlı kalarak yüklensin fakat daha sonra yaptığım filtreleme sonucundaki olayları merkez alarak yüklensin ve örneğin yönetim panelindeki olay sayfasındayım ve forma tıkladım ve tekrar yönetim paneline tıkladığım zaman bu sefer en son değişiklik yaptığım yerde harita olsun.
 4) Kullanıcı girişinde olay bildirim formunda şu anda iki tane mikrofon icon u var üzerinde mause u koyduğumda "Sesle Yaz" yazısı çıkan mikrofon iconunu kaldır diğer mikrofon icon u kalsın.
 5) Kullanıcı girişinde olay bildirim formunda  konumumu kullan için icon video iconunu ile yan yana ve video iconunun sağında yer alması gerekli şu anda öyle değil.
 6) Kullanıcı girişinde olay bildirim formundaki user yazısını ve mavi renkli o şeriti kaldır. Konumumu kullan icon u header da olacak şu anda header da yok ve ona bastıktan sonra konumunu bulduktan sonra olay bildirim formu gelecek.
 7) kullanıcı girişinde olay bildirim formunda ya da giriş ekranında geri tuşu yazıları kapatıyor geri tuşu indirdiğim back.svg icon u olsıun ve etrafı mavi olmasın yazıları kapatmasın transparan olsun o beyaz kısımları yazıya karşı duyarlı olsun ben istiyorum ki o yazıları kapatmasın her zaman geri tuşunun boyutu kadar boşluk olsun solda geri tuşu olsun daha sonra yazılar gelsin.
 Tamam şimdi sana mevcut app.js dosyamı göndericem o dosyayı iyice incele değişen kısımları eski kısmını ve yeni kısmını mevcut boşluk uyumuma uyacak şekilde eski ve yeni tam halini gönder ya da eğer eklenecek şeyler varsa nereye ekleyecem hangi satırdan önce ve öncesinde ne yazılar var ve nerede çağıracağım onu da söyle çağıracağım yerin öncesinde ve sonrasında neler var onları da yaz ondan sonra at ve kodumun genel mantığını bozmasın ve mevcut boşuk uyumuma dikkat et öyle at. Zaten şu anda index.css i değiştirme, sadece değişime ihtiyacı varmı yok mu evet ya da hayır de, onu değiştirdim sadece app.js e bu dediklerimi yapacak şekilde küçük düzenlemeler yap sakın mevcut mantığını bozma. İndex.css dosyamı daha sonra atıcam ama ilk olarak app.js i düzeltelim.











 1) Kullanıcı girişinde açılan olay bildirim formunda, kamera ve video için açılan yerlerde olay bildirim formu kamera iconuna bastığım zaman açılan kamera görüntümü kapatıyor aynı şekilde video iconuna bastığım zaman olay bildirim formu açılan video görüntümü kapatıyor.
 2) Sana gönderdiğim fotoğrafı iyice incele ve o fotoğrafta sol en üstte bir geri tuşu varbirde onun altında bir geri tuşu var onun altındaki geri tuşunu kaldır(Giriş sayfasında da onu kaldır sadece o sol üstteki kalsın).
 3) Olay bildirim formunda gelen olay türleri seçinize tıkladığımda scrollu bir şekilde gelsin.( Şuanda scrollu geliyor fakat scroll gelen boyutu biraz daha küçült)





 ;1) Kullanıcı girişinde açılan olay bildirim formunda, kamera ve video için açılan yerlerde olay bildirim formu kamera iconuna bastığım zaman açılan kamera görüntümü kapatıyor aynı şekilde video iconuna bastığım zaman olay bildirim formu açılan video görüntümü kapatıyor.

 2) Sana gönderdiğim fotoğrafı iyice incele ve o fotoğrafta sol en üstte bir geri tuşu varbirde onun altında bir geri tuşu var onun altındaki geri tuşunu kaldır(Giriş sayfasında da onu kaldır sadece o sol üstteki kalsın).

 3) Olay bildirim formunda gelen olay türleri seçinize tıkladığımda scrollu bir şekilde gelsin.( Şuanda scrollu geliyor fakat scroll gelen boyutu biraz daha küçült) Tamam şimdi sana mevcut app.js dosyamı göndericem o dosyayı iyice incele değişen kısımları eski kısmını ve yeni kısmını mevcut boşluk uyumuma uyacak şekilde eski ve yeni tam halini gönder ya da eğer eklenecek şeyler varsa nereye ekleyecem hangi satırdan önce ve öncesinde ne yazılar var ve nerede çağıracağım onu da söyle çağıracağım yerin öncesinde ve sonrasında neler var onları da yaz ondan sonra at ve kodumun genel mantığını bozmasın ve mevcut boşuk uyumuma dikkat et öyle at. Zaten şu anda index.css i değiştirme, sadece değişime ihtiyacı varmı yok mu evet ya da hayır de, onu değiştirdim sadece app.js e bu dediklerimi yapacak şekilde küçük düzenlemeler yap sakın mevcut mantığını bozma. İndex.css dosyamı daha sonra atıcam ama ilk olarak app.js i düzeltelim. Mevcut boşluk uyumuma dikkat ederek at. Bu dediğim istekler hala yok app.js i dediğin gibi değiştirmeme rağmen olmuyor düzelt bunu. Hala aynı hataları alıyorum düzelt artık bu hataarı bu isteklerimi yerne getir.mevcut app.js dosyam dediklerimi yapacak şekilde değişen fonsiyonların güncel tam halini at ve mevcut boşluk uyumuma dikat ederek at


  Tamam şimdi sana mevcut index.css dosyamı göndericem o dosyanın da mevcut mentığını bozmadan bu dediklerimi yapacak şekilde güncellenmiş halini, değişen kısımları eski kısım ve yeni kısım olarak gönder. App.js de dediğin gibi değişiklikler yaptım sıra index.css de